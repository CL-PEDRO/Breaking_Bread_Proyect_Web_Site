<!DOCTYPE html>
<html lang="en">
<head>
   <meta charset="UTF-8">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <title>Dynamic Search Interface</title>
   <style>

    .ImagenComentario
    {
        max-width: 25px;
        max-height: 25px;

        border-radius: 10px;
        box-shadow: 0 1px 1px black;
    }
    .dateTime
    {
        font-family: 'Gill Sans', 'Gill Sans MT', Calibri, 'Trebuchet MS', sans-serif;
        font-size: small;
        
    }

    #commentsBox
    {
        border-radius: 3px;
        box-shadow:  0.5px 0.5px 0.5px 0.5px gray;
        max-height: 100px;
        
    }
    .listCommetns{
        max-height: 750px;
        
        overflow: auto;
    }
        .main-container{
            display: flex;
            width: 1500px;
            justify-content: flex-end;
            gap: 20px;
            padding: 20px;
        }
       body {
           font-family: 'Arial', sans-serif;
           margin: 0;
           padding: 0;
           background-color: #f0f2f5;
           color: #333;
       }
       .header {
           display: flex;
           justify-content: space-between;
           align-items: center;
           background-color: #ffffff;
           color: black;
           padding: 10px 20px;
           box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
           position: sticky;
           top: 0;
           z-index: 1000;
       }
       .header .logo {
           display: flex;
           align-items: center;
           font-size: 20px;
           font-weight: bold;
       }
       .header .logo img {
           height: 40px;
           margin-right: 10px;
       }
       .header .navegation {
           display: flex;
           align-items: center;
       }
       .header .navegation .nav-links {
           list-style: none;
           display: flex;
           margin: 0;
           padding: 0;
       }
       .header .navegation .nav-links li {
           margin: 0 15px;
       }
       .header .navegation .nav-links a {
           color: black;
           text-decoration: none;
           font-weight: 500;
           font-size: 16px;
       }
       .header .navegation .nav-links a:hover {
           text-decoration: none;
           padding: 5px;
           background-color: #810909;
           color: #fff;
           margin: 10px;
           border-radius: 5px;
       }
       .header .search-bar {
           display: none;
       }
       .header .search-bar.active {
           display: flex;
       }
       .header .search-bar input {
           padding: 10px;
           border: 1px solid #ccc;
           border-radius: 8px;
           font-size: 16px;
           margin-left: 20px;
       }

       .main-content {
           width: 1000px;
           margin: 0;
           padding: 0;
           box-shadow: 0px 1px 1px 1px black;
       }
       aside{
        width: 25%;
        position: relative;
       }

       .post {
           background-color: #ffffff;
           border-radius: 8px;
           box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
           margin-bottom: 20px;
           padding: 20px;
       }
       .post-header {
           display: flex;
           align-items: center;
           margin-bottom: 15px;
       }
       .post-header img {
           width: 50px;
           height: 50px;
           border-radius: 50%;
           margin-right: 10px;
       }
       .post-header .user-info {
           display: flex;
           flex-direction: column;
       }
       .post-header .user-info .username {
           font-weight: bold;
           font-size: 16px;
       }
       .post-header .user-info .post-time {
           font-size: 14px;
           color: #666;
       }
       .post-content {
           margin-bottom: 15px;
       }
       .post-content .post-title {
           font-size: 20px;
           font-weight: bold;
           margin-bottom: 10px;
       }
       .post-content .post-text {
           font-size: 16px;
           line-height: 1.5;
           color: #333;
       }
       .post-content .recipe-image {
           max-width: 25%;
           border-radius: 8px;
           margin-top: 15px;
       }
       .post-content .recipe-details {
           margin-top: 15px;
       }
       .post-content .recipe-details h4 {
           font-size: 18px;
           margin-bottom: 10px;
       }
       .post-content .recipe-details p {
           font-size: 16px;
           line-height: 1.5;
           color: #333;
       }
       .post-content .recipe-details ul {
           padding-left: 20px;
           margin: 10px 0;
       }
       .post-content .recipe-details ul li {
           list-style-type: disc;
           margin-bottom: 5px;
       }
       .post-actions {
           display: flex;
           align-items: center;
           border-top: 1px solid #eee;
           padding-top: 15px;
       }
       .post-actions button {
           background-color: transparent;
           border: none;
           cursor: pointer;
           display: flex;
           align-items: center;
           margin-right: 20px;
           font-size: 14px;
           color: #666;
       }
       .post-actions button:hover {
           color: #333;
       }
       .post-actions button i {
           margin-right: 5px;
       }

       .comments {
              margin-top: 15px;
              padding: 10px;

       }

       .comment-input{
              width: 90%;
              padding: 10px;
              border: 1px solid #ccc;
              border-radius: 8px;
              font-size: 16px;
              margin-bottom: 10px;
       }
   </style>

    <link
         href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
         rel="stylesheet">   
  
</head>
<body>
   <!-- Navigation Bar -->
   <header class="header">
       <div class="logo">
           <img src="../images/logo.png" alt="logo" class="logo-img">
           Breaking Bread
       </div>
       <nav class="navegation">
           <ul class="nav-links">
               <li><a href="#">Inicio</a></li>
               <li><a href="#">Foro</a></li>
               <li><a href="#">Mi perfil</a></li>
               <li><a href="#" id="search-button">Buscar</a></li>
           </ul>
           <div class="search-bar">
               <input type="text" placeholder="Buscar..." class="search-input">
           </div>
       </nav>
   </header>

   <div class="main-container"> 
   <main>
       <!-- Main Content -->
        <div class="main-content">
    <!-- Example Post -->
    <div class="post">
        <div class="post-header">
            <img id="user-image" alt="Usuario">
            <div class="user-info">
                <span class="username">Nombre del Usuario</span>
                <span class="post-time">Hace 2 horas</span>
            </div>
        </div>
        <div class="post-content">
            <h2 class="post-title">Título de la Publicación</h2>
            <p class="post-text">Texto del contenido de la publicación. Este es un ejemplo de cómo se vería el texto en una publicación.</p>
            <img  src="" alt="Receta" class="recipe-image">
            <div class="recipe-details">
                 <h3><strong>Receta:</strong></h3>
                <h4 id="recipe-name"></h4>
                <p><strong>Descripción:</strong></p>
                <p id="recipe-description"> Descripción breve de la receta. Puede incluir detalles sobre su origen o inspiración.</p>
                <p><strong>Ingredientes:</strong></p>
                <ul id="recipe-ingredients">
                    <li>Ingrediente 1</li>
                    <li>Ingrediente 2</li>
                    <li>Ingrediente 3</li>
                </ul>
                <p><strong>Procedimiento:</strong></p>
                <p id="recipe-process"> Paso a paso detallado de cómo preparar la receta. Este texto puede ser más extenso.</p>
            </div>
        </div>
    </div>

    <!-- More posts can be added here -->
    </div>
    </main>

   <aside>
    <div class="post-actions">
        
        <button id="likeButton"><i class="far fa-thumbs-up"></i> Me gusta</button>
        <p id="likesAmount">Cantidad de likes :d</p>
        <button><i class="far fa-share-square"></i> Compartir</button>
    </div>
    <div class="comments">
        <!-- Comments can be added here -->                
         <form id="comment-form">
             <input type="text" placeholder="Escribe un comentario..." class="comment-input">
             <button type="submit" class="btn btn-dark" id="submit-button">Comentar</button>
         </form>

    </div>

    <div class="listCommetns">
        <ul id="commentarios">
            
        </ul>
    </div>


   </aside>
</div>
   <script>
    document.addEventListener('DOMContentLoaded', () => {
     
    const  nameUser = document.querySelector('.username');
    const  userImage = document.getElementById('user-image');
    const  postTitle = document.querySelector('.post-title');
    const  postText = document.querySelector('.post-text');
    const  recipeImage = document.querySelector('.recipe-image');
    const  recipename = document.getElementById('recipe-name');
    const  recipeDescription = document.getElementById('recipe-description');
    const  recipeIngredients = document.getElementById('recipe-ingredients');
    const  recipeProcedure = document.getElementById('recipe-process');
    

    
    
    const urlParamenters = new URLSearchParams(window.location.search);
    const searchTerm = urlParamenters.get('q');
    //console.log(searchTerm);
    
    const urlPost = `http://localhost:5000/postdata/${searchTerm}`;

    fetch(urlPost)
    .then(response => response.json())
    .then(data => {
        //console.log(data);
        showResults(data);
    })

    .catch(error => {
        console.error('Error fetching data:', error);
    });

    function showResults(data) {
        //console.table(data);
        const post = data[0];
        nameUser.textContent = post.nombre_Usuario;
        userImage.src = post.foto_perfil;
        postTitle.textContent = post.titulo;
        postText.textContent = post.texto;
        recipeImage.src = post.url_image;
        recipename.textContent = post.nombre_Receta;
        recipeDescription.textContent = post.descripcion_Reseta;
        recipeIngredients.textContent = post.ingredientes; 
        recipeProcedure.textContent = post.procedimiento;
        
    }    
    });

   </script>
   <script src="../js/comments.js" defer></script>
   <script src="../js/nav.js" defer></script>
   <script src="../js/actionsPost.js" defer></script>
</body>
</html>